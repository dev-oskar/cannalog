---
import { languages, type Lang } from "../../i18n/ui";
import { useTranslatedPath, getPathWithoutLang } from "../../i18n/utils";
import { getLocale } from "astro-i18n-aut";

const currentLang = getLocale(Astro.url) as Lang;
const translatePath = useTranslatedPath(currentLang);

// Get the current path without the language prefix
const untranslatedPath = getPathWithoutLang(Astro.url.pathname, currentLang);
---

<ul class="space-y-1">
  {
    Object.entries(languages).map(([targetLang, label]) => (
      <li>
        <a 
          href={translatePath(untranslatedPath, targetLang)}
          class="block px-3 py-2 text-sm text-text-color hover:bg-secondary/10 rounded-md transition-colors duration-200"
        >
          {label}
        </a>
      </li>
    ))
  }
</ul>
